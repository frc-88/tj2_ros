<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="interface_type" default="diffyjr"/>
    <arg name="publish_odom_tf" default="true"/>
    <arg name="robot_address" default="10.0.88.2"/>
    <arg name="classes_path" default="$(find tj2_yolo)/models/powercell_2021.names"/>
    <arg name="detection_topic" default="/tj2/detections"/>
    <arg name="scan_topic" default="/laser/scan"/>
    <arg name="tag_topic" default="/apriltag/tag_detections"/>
    <arg name="joint_names" default="$(find tj2_description)/config/diffyjr_joints.yaml"/>

    <group ns="tj2">
        <node name="tj2_networktables_watcher" pkg="tj2_networktables" type="tj2_networktables_node.py" output="screen" required="false">
            <param name="nt_host" value="$(arg robot_address)"/>
        </node>

        <node name="tj2_networktables" pkg="tj2_networktables" type="tj2_networktables_node" output="screen" required="false">
            <param name="interface" value="$(arg interface_type)"/>
            <param name="publish_odom_tf" value="$(arg publish_odom_tf)"/>
            <param name="classes_path" value="$(arg classes_path)"/>
            <remap from="detections" to="$(arg detection_topic)"/>
            <remap from="scan" to="$(arg scan_topic)"/>
            <remap from="tag_detections" to="$(arg tag_topic)"/>
            <rosparam param="joint_names" file="$(arg joint_names)" command="load"/>
        </node>
    </group>
</launch>
