<?xml version="1.0" encoding="UTF-8"?>
<launch>
    <arg name="apriltag_settings" default="$(find tj2_bringup)/config/diffyjr/tags/settings.yaml"/>
    <arg name="apriltag_tags" default="$(find tj2_bringup)/config/diffyjr/tags/tags.yaml"/>
    <arg name="publish_tag_detections_image" default="false"/>
    <group ns="northstar">
        <rosparam command="load" file="$(arg apriltag_settings)" ns="tj2_northstar"/>
        <rosparam command="load" file="$(arg apriltag_tags)" ns="tj2_northstar"/>
        <node pkg="tj2_northstar" type="arducam_ros" name="arducam_ros" required="false" output="screen" respawn="true">
            <param name="topic_prefix" value="camera" />
            <param name="info_directory" value="$(find tj2_bringup)/config/diffyjr/northstar/calibration" />
            <param name="device_num" value="0" />
            <param name="publish_tag_detections_image" type="bool" value="$(arg publish_tag_detections_image)" />
        </node>
        <node pkg="tj2_camera" type="tag_marker_publisher.py" name="tag_marker_publisher" required="false" output="screen"/>
    </group>

    <node pkg="tf" type="static_transform_publisher" name="base_to_siren_center" args="0.1577 0.0 0.2867  0 0 0 1 base_tilt_link siren_center 20" />
    <node pkg="tf" type="static_transform_publisher" name="siren_center_to_pivot_0" args="0.0 0.0 0.0  0.9962  -0.0000  0.0872  0.0000 siren_center pivot_0 20" />
    <node pkg="tf" type="static_transform_publisher" name="siren_center_to_pivot_1" args="0.0 0.0 0.0  0.7044  0.7044  0.0616  -0.0616 siren_center pivot_1 20" />
    <node pkg="tf" type="static_transform_publisher" name="siren_center_to_pivot_2" args="0.0 0.0 0.0  0.0000  0.9962  0.0000  -0.0872 siren_center pivot_2 20" />
    <node pkg="tf" type="static_transform_publisher" name="siren_center_to_pivot_3" args="0.0 0.0 0.0  -0.7044  0.7044  -0.0616  -0.0616 siren_center pivot_3 20" />

    <node pkg="tf" type="static_transform_publisher" name="pivot_to_camera_0" args="0.0411 0.0 0.0033  0 0 0 1 pivot_0 camera_0 20" />
    <node pkg="tf" type="static_transform_publisher" name="pivot_to_camera_1" args="0.0411 0.0 0.0033  0 0 0 1 pivot_1 camera_1 20" />
    <node pkg="tf" type="static_transform_publisher" name="pivot_to_camera_2" args="0.0411 0.0 0.0033  0 0 0 1 pivot_2 camera_2 20" />
    <node pkg="tf" type="static_transform_publisher" name="pivot_to_camera_3" args="0.0411 0.0 0.0033  0 0 0 1 pivot_3 camera_3 20" />
    <node pkg="tf" type="static_transform_publisher" name="camera_to_optical_0" args="0.0 0.0 0.0  -0.5000  0.5000  -0.5000  0.5000 camera_0 camera_optical_0 20" />
    <node pkg="tf" type="static_transform_publisher" name="camera_to_optical_1" args="0.0 0.0 0.0  -0.5000  0.5000  -0.5000  0.5000 camera_1 camera_optical_1 20" />
    <node pkg="tf" type="static_transform_publisher" name="camera_to_optical_2" args="0.0 0.0 0.0  -0.5000  0.5000  -0.5000  0.5000 camera_2 camera_optical_2 20" />
    <node pkg="tf" type="static_transform_publisher" name="camera_to_optical_3" args="0.0 0.0 0.0  -0.5000  0.5000  -0.5000  0.5000 camera_3 camera_optical_3 20" />
</launch>
